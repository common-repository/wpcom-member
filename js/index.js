!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t;(t=jQuery).fn.emulateTransitionEnd=function(e){var o=!1,i=this;return t(this).one("wpcomTransitionEnd",(function(){o=!0})),setTimeout((function(){o||t(i).trigger(t.__transition.end)}),e),this},t((function(){t.__transition=function(){var e=document.createElement("wpcom"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==e.style[o])return{end:t[o]};return!1}(),t.__transition&&(t.event.special.wpcomTransitionEnd={bindType:t.__transition.end,delegateType:t.__transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})),function(t){var o=function(e,o){this.options=o,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.wpcom.modal")}),this))};function i(i,s){return this.each((function(){var a=t(this),n=a.data("wpcom.modal"),r=t.extend({},o.DEFAULTS,a.data(),"object"==e(i)&&i);n||a.data("wpcom.modal",n=new o(this,r)),"string"==typeof i?n[i](s):r.show&&n.show(s)}))}if(o.TRANSITION_DURATION=250,o.BACKDROP_TRANSITION_DURATION=120,o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},o.prototype.show=function(e){var i=this,s=t.Event("show.wpcom.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.wpcom.modal",'[data-wpcom-dismiss="modal"], [data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.wpcom.modal",(function(){i.$element.one("mouseup.dismiss.wpcom.modal",(function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var s=t.__transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),s&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var a=t.Event("shown.wpcom.modal",{relatedTarget:e});s?i.$dialog.one("wpcomTransitionEnd",(function(){i.$element.trigger("focus").trigger(a)})).emulateTransitionEnd(o.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)})))},o.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.wpcom.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.wpcom.modal"),this.$element.removeClass("in").off("click.dismiss.wpcom.modal").off("mouseup.dismiss.wpcom.modal"),this.$dialog.off("mousedown.dismiss.wpcom.modal"),t.__transition&&this.$element.hasClass("fade")?this.$element.one("wpcomTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(o.TRANSITION_DURATION):this.hideModal())},o.prototype.enforceFocus=function(){t(document).off("focusin.wpcom.modal").on("focusin.wpcom.modal",t.proxy((function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.wpcom.modal",t.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.wpcom.modal")},o.prototype.resize=function(){this.isShown?t(window).on("resize.wpcom.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.wpcom.modal")},o.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.wpcom.modal")}))},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var i=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=t.__transition&&s;if(this.$backdrop=t(document.createElement("div")).addClass("wpcom-modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.wpcom.modal",t.proxy((function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;a?this.$backdrop.one("wpcomTransitionEnd",e).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var n=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("wpcomTransitionEnd",n).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):n()}else e&&e()},o.prototype.handleUpdate=function(){this.adjustDialog()},o.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},o.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},o.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},o.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||0;var o=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("--scrollbar-width",e+o+"px"),t(this.fixedContent).each((function(e,i){var s=i.style.paddingRight,a=t(i).css("padding-right");t(i).data("padding-right",s).css("padding-right",parseFloat(a)+o+"px")})))},o.prototype.resetScrollbar=function(){this.$body.css("--scrollbar-width",this.originalBodyPad+"px"),t(this.fixedContent).each((function(e,o){var i=t(o).data("padding-right");t(o).removeData("padding-right"),o.style.paddingRight=i||""}))},o.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t},void 0===t.fn._modal){var s=t.fn._modal,a=t.fn.modal;t.fn._modal=i,t.fn._modal.Constructor=o,t.fn.modal=i,t.fn.modal.Constructor=o,t.fn._modal.noConflict=function(){return t.fn._modal=s,this},t.fn.modal.noConflict=function(){return t.fn.modal=a,this},t(document).on("click.wpcom.modal.data-api",'[data-toggle="modal"]',(function(e){var o=t(this),s=o.attr("href"),a=o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,""),n=t(document).find(a),r=n.data("wpcom.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&e.preventDefault(),n.one("show.wpcom.modal",(function(e){e.isDefaultPrevented()||n.one("hidden.wpcom.modal",(function(){o.is(":visible")&&o.trigger("focus")}))})),i.call(n,r,this)}))}}(jQuery),function(e){var t='[data-wpcom-dismiss="alert"], [data-dismiss="alert"]',o=function(o){e(o).on("click",t,this.close)};o.TRANSITION_DURATION=150,o.prototype.close=function(t){var i=e(this),s=i.attr("data-target");s||(s=(s=i.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,"")),s="#"===s?[]:s;var a=e(document).find(s);function n(){a.detach().trigger("closed.wpcom.alert").remove()}t&&t.preventDefault(),a.length||(a=i.closest(".wpcom-alert")),a.trigger(t=e.Event("close.wpcom.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.__transition&&a.hasClass("fade")?a.one("wpcomTransitionEnd",n).emulateTransitionEnd(o.TRANSITION_DURATION):n())};var i=e.fn._alert;e.fn._alert=function(t){return this.each((function(){var i=e(this),s=i.data("wpcom.alert");s||i.data("wpcom.alert",s=new o(this)),"string"==typeof t&&s[t].call(i)}))},e.fn._alert.Constructor=o,e.fn._alert.noConflict=function(){return e.fn._alert=i,this},e(document).on("click.wpcom.alert.data-api",t,o.prototype.close)}(jQuery),jQuery((function(e){function t(e,t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=(e&&e.split("?")[1]?e.split("?")[1]:"").match(o);return null!=i?unescape(i[2]):null}var o,i,s=0;e(document).on("click",".edit-avatar, .edit-cover",(function(t){t.preventDefault(),s=e(this).hasClass("edit-cover")?1:0,i=e(this).data("user");var a=cropperModal({lg:s,title:_wpmx_js.cropper.title,desc:s?_wpmx_js.cropper.desc_1:_wpmx_js.cropper.desc_0,btn:_wpmx_js.cropper.btn,loading:_wpmx_js.cropper.loading,apply:_wpmx_js.cropper.apply,cancel:_wpmx_js.cropper.cancel});e("#crop-modal").length?e("#crop-modal").replaceWith(a):e("body").append(a),o&&(o.destroy(),o=null,e(".crop-img-wrap").hide(),e(".crop-img-btn").show(),e("#crop-img").remove()),e("#crop-modal")._modal("show")})).on("change","#img-file",(function(t){if(!this.files.length)return!1;var i;if(this.files[0].size/1024>5120)return wpcom_alert(_wpmx_js.cropper.alert_size),!1;this.files[0].type.match(/image.*/)?(i=window.URL.createObjectURL(this.files[0]),e(".crop-img-wrap").append('<img id="crop-img" src="'+i+'">').show(),e(".crop-img-btn").hide(),o=new Cropper(document.getElementById("crop-img"),{aspectRatio:s?2.7:1,minContainerHeight:300,viewMode:s?3:1,ready:function(){var e={width:300,height:300};s&&(e={width:810,height:300,left:44}),o.setCropBoxData(e)}}),e(this).val("")):wpcom_alert(_wpmx_js.cropper.alert_filetype)})).on("click",".j-crop-close",(function(){o&&o.destroy(),o=null,e(".crop-img-wrap").hide(),e(".crop-img-btn").show(),e("#crop-img").remove()})).on("click",".j-crop-apply",(function(){var t=e(this);if(t.loading(1),o)if(o.crop().cropped){var a={minWidth:200,minHeight:200,maxWidth:600,maxHeight:600,fillColor:"#fff",imageSmoothingQuality:"high"};s&&(a={minWidth:810,minHeight:300,maxWidth:1620,maxHeight:600,fillColor:"#fff",imageSmoothingQuality:"high"});var n=e.extend(o.getCropBoxData(),a),r=o.getCroppedCanvas(n).toDataURL("image/jpeg",.95);if(r){var l=new FormData;l.append("action","wpcom_cropped_upload"),l.append("nonce",e("#wpcom_cropper_nonce").val()),l.append("image",r),l.append("type",s),i&&l.append("user",i),e.ajax(_wpmx_js.ajaxurl,{type:"POST",data:l,dataType:"json",processData:!1,contentType:!1,success:function(o){"1"==o.result?(s?e(".wpcom-profile-head .wpcom-ph-bg img").attr("src",o.url):e(".member-account-avatar img.avatar,.wpcom-ph-avatar img.avatar,#j-user-wrap img.avatar").replaceWith('<img class="avatar photo" src="'+o.url+"?t="+Date.parse(new Date)/1e3+'">'),e("#crop-modal")._modal("hide")):"-1"==o.result?wpcom_notice({message:_wpmx_js.cropper.err_nonce,show:2e3,type:"warning"}):"-2"==o.result?wpcom_notice({message:_wpmx_js.cropper.err_fail,show:2e3,type:"error"}):"-3"==o.result&&wpcom_notice({message:_wpmx_js.cropper.err_login,show:2e3,type:"warning"}),t.loading(0)},error:function(){wpcom_notice({message:_wpmx_js.cropper.ajaxerr,show:2e3,type:"error"}),t.loading(0)}})}else t.loading(0)}else t.loading(0);else wpcom_notice({message:_wpmx_js.cropper.err_empty,show:2e3,type:"warning"}),t.loading(0)})).on("click",".j-social-unbind",(function(){var t=e(this);if(t.hasClass("disabled"))return!1;var o=t.data("name");t.addClass("disabled").text("\u5904\u7406\u4e2d..."),confirm("\u662f\u5426\u786e\u5b9a\u89e3\u9664\u7ed1\u5b9a\uff1f")?e.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_social_unbind",name:o},dataType:"json",success:function(e){t.removeClass("disabled").text("\u89e3\u9664\u7ed1\u5b9a"),1==e.result?(wpcom_alert("\u89e3\u7ed1\u6210\u529f\uff01"),t.parent().html(e.error)):e.error&&wpcom_alert(e.error)},error:function(){t.removeClass("disabled").text("\u89e3\u9664\u7ed1\u5b9a")}}):t.removeClass("disabled").text("\u89e3\u9664\u7ed1\u5b9a")})).on("click","a",(function(o){var i=e(this).attr("href"),s=i?i.match(/(\?|&)modal-type=(login|register)/i):null;if(s&&s[2]){if(e("body.navbar-on").length)return;o.preventDefault(),o.stopPropagation();var a=e("#login-form-modal");0===a.length&&(jQuery(document.body).append('<div class="wpcom-modal modal-login fade" id="login-form-modal" data-backdrop="static">\n            <div class="modal-dialog">\n                <div class="modal-content"><div class="wpcom-close" data-wpcom-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n                    <div class="modal-body"></div>\n                </div>\n            </div>\n        </div>'),a=jQuery("#login-form-modal")),e("#login-modal").length&&e("#login-modal")._modal("hide");var n=a.find(".modal-body");n.html('<i class="wpcom-icon wi wpcom-icon-loader"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>'),e("body").hasClass("modal-open")?setTimeout((function(){a._modal("show")}),200):a._modal("show");var r=t(i,"approve"),l={action:"wpcom_login_modal",type:s[2]};return r&&(l.approve=r,l.login=t(i,"login")),e.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:l,dataType:"html",success:function(t){"undefined"==typeof is_load_login?e.getScript(_wpmx_js.plugin_url+"js/login.js",(function(){n.html(t),e(document).trigger("init_captcha")})):(n.html(t),e(document).trigger("init_captcha")),setTimeout((function(){e.fn.tooltip&&n.find('[data-toggle="tooltip"]').tooltip()}),1e3)},error:function(){}}),!1}})).on("click",".member-form-tab a",(function(t){t.preventDefault();var o=e(this);if(o.closest("li").hasClass("active"))return!1;var i=o.closest("ul"),s=i.closest(".member-form-inner"),a=o.data("type"),n=e("#j-tpl-login"+("2"==a?"2":"")).html();n&&(s.find(".member-form-items").html(n),i.find("li").removeClass("active"),o.closest("li").addClass("active"),a=a?0:1,e(document).trigger("init_captcha"))})).on("click",".show-password",(function(){var t=e(this);t.hasClass("active")?(t.html('<i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-eye-off-fill"></use></svg></i>').removeClass("active"),t.parent().find("input").attr("type","password")):(t.html('<i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-eye-fill"></use></svg></i>').addClass("active"),t.parent().find("input").attr("type","text"))})).on("wpcom_not_login",(function(){!function(){if(0===jQuery("#login-modal").length){var e=_wpmx_js.login_url,t=_wpmx_js.register_url,o='<div class="wpcom-modal fade" id="login-modal">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="wpcom-close" data-wpcom-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n                <h4 class="modal-title">'+_wpmx_js.js_lang.login_title+'</h4>\n            </div>\n            <div class="modal-body">\n                <p>'+_wpmx_js.js_lang.login_desc+'</p>\n            </div>\n           <div class="modal-footer">\n                    <a class="wpcom-btn btn-primary" href="'+e+'">'+_wpmx_js.js_lang.login_btn+'</a>\n                    <a class="wpcom-btn" href="'+t+'">'+_wpmx_js.js_lang.reg_btn+"</a>\n                </div>\n        </div>\n    </div>\n</div>";jQuery("body").append(o)}}()}));var a=e("#j-user-wrap");a.length&&e.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_is_login"},dataType:"json",success:function(t){if(0==t.result){var o=0;t.messages&&(o=Number(t.messages)),t.notifications&&(o+=Number(t.notifications));var i='<ul class="profile"><li class="menu-item dropdown"><a class="menu-item-user" href="'+(t.account?t.account:t.url)+'"><span class="menu-item-avatar">'+t.avatar+(o?'<span class="menu-item-unread">'+o+"</span>":"")+'</span><span class="menu-item-name">'+t.display_name+"</span></a>",s=e(".header .navbar-toggle");if(o&&s.length&&s.append('<span class="navbar-unread">'+o+"</span>"),t.menus&&t.menus.length){i+='<ul class="dropdown-menu">';for(var n=0;n<t.menus.length;n++)i+='<li><a href="'+t.menus[n].url+'">'+t.menus[n].title+"</a></li>";i+="</ul>"}i+="</li></ul>",a.html(i),window.is_login=!0,e(document).trigger("wpcom_login",t)}else a.find(".login").addClass("cur"),window.is_login=!1,e(document).trigger("wpcom_not_login");t.wc&&(t.wc.fragments&&t.wc.fragments["a.cart-contents"]&&e("header .shopping-cart").html(t.wc.fragments["a.cart-contents"]),setTimeout((function(){t.wc.fragments&&t.wc.fragments["div.widget_shopping_cart_content"]&&e("header .shopping-cart").append(t.wc.fragments["div.widget_shopping_cart_content"])}),100)),e(document).trigger("wpcom_login_checked")}}),e(".social-login-wrap").on("submit","#sl-form-create",(function(){var t=e(this);if(t.find(".sl-input-submit.disabled").length)return!1;t.find(".sl-input-submit").addClass("disabled");for(var o=0,i=t.find(".sl-input input.require"),s=0;s<i.length;s++){""==(e(i[s]).length?e(i[s]).val():"").trim()&&(e(i[s]).addClass("error"),o=1)}return o?t.find(".sl-input-submit").removeClass("disabled"):e.ajax({url:_wpmx_js.ajaxurl,data:e(this).serialize()+"&action=wpcom_sl_login",type:"POST",dataType:"json",success:function(e){t.find(".sl-input-submit").removeClass("disabled"),"-1"==e?t.find(".sl-result").text("\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01").addClass("error"):"1"==e.result?t.find(".sl-result").text("\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a").addClass("error"):"2"==e.result?t.find(".sl-result").text("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef").addClass("error"):"3"==e.result?t.find(".sl-result").text("\u7b2c\u4e09\u65b9\u5e94\u7528\u6388\u6743\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5").addClass("error"):"4"==e.result?t.find(".sl-result").text("\u7b2c\u4e09\u65b9\u5e10\u53f7\u5df2\u4e0e\u672c\u7ad9\u5176\u4ed6\u5e10\u53f7\u7ed1\u5b9a").addClass("error"):"0"==e.result&&(t.find(".sl-result").text("\u7ed1\u5b9a\u6210\u529f\uff01").removeClass("error"),setTimeout((function(){window.location.href=e.redirect}),100))},error:function(e){t.find(".sl-result").text("\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01").addClass("error"),t.find(".sl-input-submit").removeClass("disabled")}}),!1})).on("submit","#sl-form-bind",(function(){var t=e(this);if(t.find(".sl-input-submit.disabled").length)return!1;t.find(".sl-input-submit").addClass("disabled");for(var o=0,i=t.find(".sl-input input.require"),s=0;s<i.length;s++){""==(e(i[s]).length?e(i[s]).val():"").trim()&&(e(i[s]).addClass("error"),o=1)}return o?t.find(".sl-input-submit").removeClass("disabled"):e.ajax({url:_wpmx_js.ajaxurl,data:e(this).serialize()+"&action=wpcom_sl_create",type:"POST",dataType:"json",success:function(e){"-1"==e?t.find(".sl-result").text("\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01").addClass("error"):"1"==e.result?t.find(".sl-result").text("\u8bf7\u8f93\u5165\u7535\u5b50\u90ae\u7bb1").addClass("error"):"2"==e.result?t.find(".sl-result").text("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u5b50\u90ae\u7bb1").addClass("error"):"3"==e.result?t.find(".sl-result").text("\u7b2c\u4e09\u65b9\u5e94\u7528\u6388\u6743\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5").addClass("error"):"4"==e.result?t.find(".sl-result").text("\u7b2c\u4e09\u65b9\u5e10\u53f7\u5df2\u4e0e\u672c\u7ad9\u5176\u4ed6\u5e10\u53f7\u7ed1\u5b9a").addClass("error"):"5"==e.result?t.find(".sl-result").text("\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c").addClass("error"):"0"==e.result?(t.find(".sl-result").text("\u6ce8\u518c\u6210\u529f\uff01").removeClass("error"),setTimeout((function(){window.location.href=e.redirect}),100)):e.result&&e.msg&&t.find(".sl-result").text(e.msg).addClass("error"),t.find(".sl-input-submit").removeClass("disabled")},error:function(e){t.find(".sl-result").text("\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u91cd\u8bd5\uff01").addClass("error"),t.find(".sl-input-submit").removeClass("disabled")}}),!1})).on("input change",".sl-input input",(function(){var t=e(this);t.removeClass("error"),t.closest(".sl-info-form").find(".sl-result").text("")})).on("click",".sl-form-title",(function(){var t=e(this).closest(".sl-form-item");e(".sl-form-item").removeClass("active"),t.addClass("active")}))})),jQuery((function(t){t.fn.loading||t.fn.extend({loading:function(e){var o=t(this);e?o.addClass("loading").prepend('<i class="wpcom-icon wi wi-loader"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>'):o.removeClass("loading").find(".wi-loader").remove()}}),window.wpcom_alert||(window.wpcom_alert=function(e,o){o=o||"\u63d0\u793a\u4fe1\u606f";var i=t("#wpcom-alert");if(i.length)i.find(".modal-title").html(o),i.find(".modal-body").html(e),i._modal("show");else{var s='<div class="wpcom-modal fade modal-alert" id="wpcom-alert" data-backdrop="static">\n            <div class="modal-dialog modal-sm">\n                <div class="modal-content">                   <div class="modal-header"><div class="wpcom-close" data-wpcom-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div><h4 class="modal-title">'+o+'</h4></div>\n                   <div class="modal-body">'+e+'</div>\n                   <div class="modal-footer"><button type="button" class="wpcom-btn btn-primary" data-wpcom-dismiss="modal" aria-label="Close">\u786e\u5b9a</button></div>                </div>\n            </div>\n        </div>';t("body").append(s)}t("#wpcom-alert")._modal("show")}),window.wpcom_notice||(window.wpcom_notice=function(t){if(!arguments.length||1===arguments.length&&"object"===e(arguments[0])||(t={},void 0!==arguments[0]&&(t.message=arguments[0]),void 0!==arguments[1]&&(t.type=arguments[1]),void 0!==arguments[2]&&"loading"!==t.type&&(t.show=arguments[2]),void 0!==arguments[2]&&"loading"===t.type&&(t.callback=arguments[2])),\u00e5,t&&t.message){t.type=t.type?t.type:"success";var o='<div class="notice-message"><div class="notice-message-content notice-message-'+t.type+'">';"success"===t.type?o+='<i class="wpcom-icon wi notice-message-icon"><svg aria-hidden="true"><use xlink:href="#wi-success"></use></svg></i>':"warning"===t.type||"error"===t.type?o+='<i class="wpcom-icon wi notice-message-icon"><svg aria-hidden="true"><use xlink:href="#wi-warning"></use></svg></i>':"loading"===t.type&&(o+='<i class="wpcom-icon wi notice-message-icon"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>'),o+=t.message+"</div></div>";var i=jQuery(o),s=jQuery(".notice-message-wrapper");return 0===s.length&&(jQuery(document.body).append('<div class="notice-message-wrapper"></div>'),s=jQuery(".notice-message-wrapper")),s.append(i),i.one("hide.notice",(function(){var e=jQuery(this);e.removeClass("notice-message-active").addClass("notice-message-up"),setTimeout((function(){e.remove(),0===s.find(".notice-message").length&&s.remove()}),320)})),setTimeout((function(){i.addClass("notice-message-active"),"loading"===t.type&&void 0!==t.callback?t.callback(i):setTimeout((function(){i.trigger("hide.notice")}),t.show?t.show:3e3)}),50),i}}),t(document.body).on("click",".profile-tab .profile-tab-item",(function(){var e=t(this),o=e.closest(".wpcom-profile-main"),i=e.index();o.find(".profile-tab-item, .profile-tab-content").removeClass("active"),e.addClass("active"),o.find(".profile-tab-content").eq(i).addClass("active").trigger("profile_tab_show")})).on("click",".j-user-posts, .j-user-comments, .j-user-favorites, .j-user-follows, .j-user-followers",(function(){var e=t(this);if(!e.hasClass("disabled")&&!e.hasClass("loading")){var o=null,i=e.data("page");if(i=void 0!==i?i+1:2,e.hasClass("j-user-posts")){var s=t(".profile-posts-list").data("user");o={action:"wpcom_user_posts",user:s||0,page:i}}else if(e.hasClass("j-user-comments")){var a=t(".profile-comments-list").data("user");o={action:"wpcom_user_comments",user:a||0,page:i}}else if(e.hasClass("j-user-favorites")){var n=t(".profile-favorites-list").data("user");o={action:"wpcom_user_favorites",user:n||0,page:i}}else if(e.hasClass("j-user-follows")){var r=t(".profile-tab").data("user");o={action:"wpcom_user_follows",user:r||0,page:i}}else if(e.hasClass("j-user-followers")){var l=t(".profile-tab").data("user");o={action:"wpcom_user_followers",user:l||0,page:i}}return e.loading(1),t.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:o,dataType:"html",success:function(o,s,a){if("0"==o){if(e.addClass("disabled").text(_wpmx_js.js_lang.page_loaded),e.hasClass("j-user-followers")){var n=e.closest(".profile-tab-content");n.find(".follow-items-loading").length&&(n.find(".follow-items-loading").remove(),n.find(".profile-no-content").show())}}else{var r=t(o);if(e.parent().prev().append(r),e.hasClass("j-user-follows"))t(document).trigger("check_follow");else if(e.hasClass("j-user-followers")){var l=e.closest(".profile-tab-content");l.find(".follow-items-loading").remove(),l.find(".follow-items").show(),"0"!==a.getResponseHeader("Next-page")&&l.find(".load-more-wrap").show(),t(document).trigger("check_follow")}"undefined"!=typeof _wpcom_js&&t.fn.lazyload&&function(e){if(e.length){var t=void 0!==_wpcom_js.webp&&_wpcom_js.webp?_wpcom_js.webp:null;if(e.eq(0).is("img"))e.eq(0).one("load",(function(){e.lazyload({webp:t})}));else{var o=document.createElement("img"),i=window.getComputedStyle(e[0]).getPropertyValue("background-image");i?(o.src=i.slice(4,-1).replace(/['"]/g,""),o.onload=function(){e.lazyload({webp:t})}):setTimeout((function(){o.onload=function(){e.lazyload({webp:t})}}),300)}}}(r.find(".j-lazy")),e.data("page",i),t(window).trigger("scroll")}e.loading(0)},error:function(){e.loading(0)}}),!1}}))}))}));
